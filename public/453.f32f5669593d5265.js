"use strict";(self.webpackChunkfrontEndAngular=self.webpackChunkfrontEndAngular||[]).push([[453],{8146:(Ne,C,l)=>{l.r(C),l.d(C,{EventosModule:()=>qe});var d=l(6895),u=l(5450),i=l(433),f=l(3065),e=l(8256),b=l(263),m=l(805),M=l(8681),S=l(3966),p=l(403),g=l(5593),h=l(1493),v=l(2453),A=l(1740),x=l(3054),I=l(8969);function k(r,s){if(1&r&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.nombre_institucion," - ",t.ubicacion," ")}}function j(r,s){1&r&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2),e.ALo(3,"uppercase"),e._UZ(4,"p-sortIcon",29),e.qZA(),e.TgZ(5,"th",30),e._uU(6),e.ALo(7,"uppercase"),e._UZ(8,"p-sortIcon",31),e.qZA(),e.TgZ(9,"th",32),e._uU(10),e.ALo(11,"uppercase"),e._UZ(12,"p-sortIcon",31),e.qZA(),e.TgZ(13,"th",33),e._uU(14),e.ALo(15,"uppercase"),e._UZ(16,"p-sortIcon",34),e.qZA(),e.TgZ(17,"th",35),e._uU(18),e.ALo(19,"uppercase"),e._UZ(20,"p-sortIcon",36),e.qZA(),e.TgZ(21,"th",37),e._uU(22),e.ALo(23,"uppercase"),e._UZ(24,"p-sortIcon",38),e.qZA(),e.TgZ(25,"th",39),e._uU(26),e.ALo(27,"uppercase"),e._UZ(28,"p-sortIcon",40),e.qZA(),e.TgZ(29,"th",41),e._uU(30),e.ALo(31,"uppercase"),e._UZ(32,"p-sortIcon",42),e.qZA()(),e.TgZ(33,"tr")(34,"th"),e._UZ(35,"p-columnFilter",43),e.qZA(),e.TgZ(36,"th"),e._UZ(37,"p-columnFilter",44),e.qZA(),e.TgZ(38,"th"),e._UZ(39,"p-columnFilter",45),e.qZA(),e.TgZ(40,"th"),e._UZ(41,"p-columnFilter",46),e.qZA(),e.TgZ(42,"th"),e._UZ(43,"p-columnFilter",47),e.qZA(),e.TgZ(44,"th"),e._UZ(45,"p-columnFilter",48),e.qZA(),e.TgZ(46,"th"),e._UZ(47,"p-columnFilter",49),e.qZA(),e.TgZ(48,"th"),e._UZ(49,"p-columnFilter",50),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,8,"codigo")," "),e.xp6(4),e.hij(" ",e.lcZ(7,10,"Nombre")," "),e.xp6(4),e.hij(" ",e.lcZ(11,12,"Descripcion")," "),e.xp6(4),e.hij(" ",e.lcZ(15,14,"Inicio")," "),e.xp6(4),e.hij(" ",e.lcZ(19,16,"Fin")," "),e.xp6(4),e.hij(" ",e.lcZ(23,18,"Logo")," "),e.xp6(4),e.hij(" ",e.lcZ(27,20,"ubicacion")," "),e.xp6(4),e.hij(" ",e.lcZ(31,22,"Ajustes")," "))}function J(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"img",51),e.TgZ(15,"p-button",52),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.showModalDialogImage(n))}),e.qZA()(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"p-button",53),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.editar(n))}),e.qZA(),e.TgZ(20,"p-button",54),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.navegarHaciaHijo(n.id))}),e.qZA(),e.TgZ(21,"p-button",55),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.eliminar(n.id))}),e.qZA()()()}if(2&r){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.nombre_Evento),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(e.lcZ(9,8,t.fecha_ini)),e.xp6(3),e.Oqu(e.lcZ(12,10,t.fecha_fin)),e.xp6(3),e.Q6J("src",o.direccionEventosImagen+t.logo,e.LSH)("alt",t.nombre),e.xp6(3),e.Oqu(t.Institucion.ubicacion)}}function D(r,s){if(1&r&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.AsE(" ",t.name," - ",t.size," bytes ")}}function Y(r,s){if(1&r&&(e.TgZ(0,"ul"),e.YNc(1,D,2,2,"li",57),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles)}}function z(r,s){if(1&r&&e.YNc(0,Y,2,1,"ul",56),2&r){const t=e.oxw();e.Q6J("ngIf",t.uploadedFiles.length)}}function O(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"p-button",58),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayModalImage=!1)}),e.qZA()}}const q=function(){return{width:"50vw"}},Z=function(){return{width:"100%"}},H=function(){return["id","nombre_Evento","descripcion","fecha_ini","fecha_fin","logo","Institucion.ubicacion","ajustes"]},L=function(){return{"min-width":"100rem"}};let P=(()=>{class r{constructor(t,o,a,n,c){this.authService=t,this.messageService=o,this.eventosService=a,this.route=n,this.institucionService=c,this.direccionEventosImagen="",this.lista_eventos=[],this.datosParaEnviar="enviando del padres",this.displayModalImage=!1,this.uploadedFiles=[],this.lista_de_instituciones=[],this.select_id=0,this.eventoForm=new i.cw({nombre_Evento:new i.NI("",[i.kI.required]),fecha_ini:new i.NI("",[i.kI.required]),fecha_fin:new i.NI("",[i.kI.required]),InstitucionId:new i.NI(0,[i.kI.required]),descripcion:new i.NI("",[i.kI.required])}),this.activied_eventoForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),logo:new i.NI(""),InstitucionId:new i.NI(0,[i.kI.required]),descripcion:new i.NI("",[i.kI.required])}),this.visible=!1,this.direccionEventosImagen=f.y.eventos}navegarHaciaHijo(t){this.datosParaEnviar=t,this.route.navigate(["/admin/eventos/actividades",this.datosParaEnviar])}ngOnInit(){this.mostrarEventos(),this.mostrarInstituciones()}showModalDialogImage(t){this.eventos={...t},this.displayModalImage=!0}myUploader(t){console.log(t.files);let o=new FormData;o.append("imagen",t.files[0]),this.eventosService.actualizarImagen(this.eventos.id,o).subscribe(a=>{this.displayModalImage=!1,this.messageService.add({severity:"info",summary:"Imagen Actualizada",detail:""}),this.mostrarEventos()},a=>{this.messageService.add({severity:"info",summary:"Error al Actualizar Imagen",detail:""})})}mostrarEventos(){this.eventosService.mostrar().subscribe(t=>{this.lista_eventos=t,console.log(this.lista_eventos)},t=>console.error(t))}eliminar(t){console.log(t),this.eventosService.eliminar(t).subscribe(o=>{this.mostrarEventos()},o=>console.error(o))}showDialog(){this.mostrarInstituciones(),this.visible=!0}hideDialog(){this.visible=!1,this.eventoForm.reset(),this.select_id=0}mostrarInstituciones(){this.institucionService.mostrar().subscribe(t=>{this.lista_de_instituciones=t},t=>console.error(t))}cancelar(){this.hideDialog()}editar(t){this.select_id=t.id,console.log(t),this.eventoForm=new i.cw({nombre_Evento:new i.NI(t.nombre_Evento,[i.kI.required]),fecha_ini:new i.NI(t.fecha_ini,[i.kI.required]),fecha_fin:new i.NI(t.fecha_fin,[i.kI.required]),InstitucionId:new i.NI(t.InstitucionId,[i.kI.required]),descripcion:new i.NI(t.descripcion,[i.kI.required])}),this.showDialog()}adicionarActividad(t){this.select_id=t,console.log(this.select_id)}guardarEditar(){this.select_id>0?(console.log("entra a editar"),this.eventosService.actualizar(this.select_id,this.eventoForm.value).subscribe(t=>{this.messageService.add({severity:"success",summary:"Actualizdo",detail:"Evento Actualizado"}),this.hideDialog(),this.mostrarEventos()})):this.eventosService.guardar(this.eventoForm.value).subscribe(t=>{this.messageService.add({severity:"success",summary:"A\xf1adido",detail:"Evento A\xf1adido"}),this.hideDialog(),this.mostrarEventos()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:"Evento no a\xf1adido"})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.e),e.Y36(m.ez),e.Y36(M.S),e.Y36(u.F0),e.Y36(S.v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-mostrar"]],decls:48,vars:44,consts:[[3,"header","visible","modal","draggable","resizable","visibleChange"],[1,"card"],[1,"row"],[3,"formGroup"],[1,"col-md-12"],[1,"my-3"],["aria-label",".form-select-lg example","formControlName","InstitucionId",1,"form-select","form-select-md","mb-3"],[3,"value",4,"ngFor","ngForOf"],[1,"form-label"],[1,"flex"],["type","text","pInputText","","formControlName","nombre_Evento"],["rows","5","cols","30","pInputTextarea","","formControlName","descripcion"],["type","date","pInputText","","formControlName","fecha_ini"],["type","date","pInputText","","formControlName","fecha_fin"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger","my-1",3,"click"],[1,"flex","justify-content-between"],["label","Adicionar Evento",3,"click"],["selectionMode","single","scrollHeight","400px","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"selection","value","paginator","rows","scrollable","showCurrentPageReport","globalFilterFields","tableStyle","selectionChange"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["position","top-right"],["header","Subir Imagen",3,"visible","modal","draggable","resizable","visibleChange"],["name","demo[]","accept","image/*",3,"customUpload","uploadHandler"],["pTemplate","content"],["pTemplate","footer"],[3,"value"],["pSortableColumn","id"],["field","id"],["pSortableColumn","nombre_Evento"],["field","nombre_Evento"],["pSortableColumn","descripcion"],["pSortableColumn","fecha_ini"],["field","fecha_ini"],["pSortableColumn","fecha_fin"],["field","fecha_fin"],["pSortableColumn","logo"],["field","logo"],["pSortableColumn","Institucion.ubicacion"],["field","Institucion.ubicacion"],["pSortableColumn","ajustes"],["field","ajustes"],["type","text","field","id"],["type","text","field","nombre_Evento"],["type","text","field","descripcion"],["type","text","field","fecha_ini"],["type","text","field","fecha_fin"],["type","text","field","logo"],["type","text","field","Institucion.ubicacion"],["type","text","field","ajustes"],["width","100",1,"shadow-4",3,"src","alt"],["icon","pi pi-image","label","Imagen",3,"click"],["icon","pi pi-pencil","styleClass","p-button-raised p-button-warning",1,"border",3,"click"],["icon","pi pi-plus","styleClass","p-button-raised p-button-success",1,"border",3,"click"],["icon","pi pi-trash","styleClass","p-button-raised p-button-danger",1,"border",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(n){return o.visible=n}),e._uU(1),e.ALo(2,"json"),e.TgZ(3,"div",1)(4,"div",2)(5,"form",3)(6,"div",4)(7,"h4"),e._uU(8,"Ubicaci\xf3n del Evento"),e.qZA()(),e.TgZ(9,"div",5)(10,"select",6),e.YNc(11,k,2,3,"option",7),e.qZA()(),e.TgZ(12,"div",4)(13,"h4"),e._uU(14,"Descripci\xf3n del Evento"),e.qZA()(),e.TgZ(15,"label",8),e._uU(16,"Nombre del Evento"),e.qZA(),e.TgZ(17,"div",9),e._UZ(18,"input",10),e.qZA(),e.TgZ(19,"label",8),e._uU(20,"Descripcion del Evento"),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"textarea",11),e.qZA(),e.TgZ(23,"div",2)(24,"label",8),e._uU(25,"Fecha de Inicio"),e.qZA(),e._UZ(26,"input",12),e.TgZ(27,"label",8),e._uU(28,"Fecha de Finalizaci\xf3n"),e.qZA(),e._UZ(29,"input",13),e.TgZ(30,"button",14),e.NdJ("click",function(){return o.guardarEditar()}),e._uU(31),e.qZA(),e.TgZ(32,"button",15),e.NdJ("click",function(){return o.cancelar()}),e._uU(33," Cancelar "),e.qZA()()()()()(),e.TgZ(34,"div",16)(35,"h1"),e._uU(36,"Lista de Eventos"),e.qZA(),e.TgZ(37,"p-button",17),e.NdJ("click",function(){return o.showDialog()}),e.qZA()(),e.TgZ(38,"div",1)(39,"p-table",18,19),e.NdJ("selectionChange",function(n){return o.lista_eventos=n}),e.YNc(41,j,50,24,"ng-template",20),e.YNc(42,J,22,12,"ng-template",21),e.qZA()(),e._UZ(43,"p-toast",22),e.TgZ(44,"p-dialog",23),e.NdJ("visibleChange",function(n){return o.displayModalImage=n}),e.TgZ(45,"p-fileUpload",24),e.NdJ("uploadHandler",function(n){return o.myUploader(n)}),e.YNc(46,z,1,1,"ng-template",25),e.qZA(),e.YNc(47,O,1,0,"ng-template",26),e.qZA()),2&t&&(e.Akn(e.DdM(36,q)),e.s9C("header",o.select_id>0?"Actualizar Evento":"Crear Evento"),e.Q6J("visible",o.visible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.hij("\n",e.lcZ(2,34,o.eventoForm.value)," "),e.xp6(4),e.Q6J("formGroup",o.eventoForm),e.xp6(6),e.Q6J("ngForOf",o.lista_de_instituciones),e.xp6(7),e.Akn(e.DdM(37,Z)),e.xp6(4),e.Akn(e.DdM(38,Z)),e.xp6(4),e.Akn(e.DdM(39,Z)),e.xp6(3),e.Akn(e.DdM(40,Z)),e.xp6(2),e.hij(" ",o.select_id>0?"Guardar Cambios":"Guardar"," "),e.xp6(8),e.Q6J("selection",o.lista_eventos)("value",o.lista_eventos)("paginator",!0)("rows",15)("scrollable",!0)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(41,H))("tableStyle",e.DdM(42,L)),e.xp6(5),e.Akn(e.DdM(43,q)),e.Q6J("visible",o.displayModalImage)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.Q6J("customUpload",!0))},dependencies:[d.sg,d.O5,p.iA,m.jx,p.lQ,p.fz,p.xl,g.zx,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u,h.V,v.FN,A.o,x.g,I.p,d.gd,d.Ts,d.uU],styles:[".tamanio[_ngcontent-%COMP%]{width:100%}"]}),r})();var Q=l(7579),U=l(5796),y=l(2885),R=l(8885),w=l(613);function $(r,s){if(1&r&&(e.TgZ(0,"div",25),e._UZ(1,"p-radioButton",26),e.TgZ(2,"label"),e._uU(3),e.qZA()()),2&r){const t=s.$implicit;e.xp6(1),e.s9C("value",t.id),e.xp6(2),e.Oqu(t.descripcion)}}function G(r,s){if(1&r&&(e.TgZ(0,"div",25),e._UZ(1,"p-radioButton",27),e.TgZ(2,"label"),e._uU(3),e.qZA()()),2&r){const t=s.$implicit;e.xp6(1),e.s9C("value",t.UsuarioId),e.xp6(2),e.Oqu(t.Usuario.Persona.nombre+" "+t.Usuario.Persona.paterno)}}function B(r,s){1&r&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2),e.ALo(3,"uppercase"),e._UZ(4,"p-sortIcon",29),e.qZA(),e.TgZ(5,"th",30),e._uU(6),e.ALo(7,"uppercase"),e._UZ(8,"p-sortIcon",31),e.qZA(),e.TgZ(9,"th",32),e._uU(10),e.ALo(11,"uppercase"),e._UZ(12,"p-sortIcon",33),e.qZA(),e.TgZ(13,"th",34),e._uU(14),e.ALo(15,"uppercase"),e._UZ(16,"p-sortIcon",35),e.qZA(),e.TgZ(17,"th",36),e._uU(18),e.ALo(19,"uppercase"),e._UZ(20,"p-sortIcon",37),e.qZA(),e.TgZ(21,"th",38),e._uU(22),e.ALo(23,"uppercase"),e._UZ(24,"p-sortIcon",39),e.qZA(),e.TgZ(25,"th",40),e._uU(26),e.ALo(27,"uppercase"),e._UZ(28,"p-sortIcon",41),e.qZA()(),e.TgZ(29,"tr")(30,"th"),e._UZ(31,"p-columnFilter",42),e.qZA(),e.TgZ(32,"th"),e._UZ(33,"p-columnFilter",43),e.qZA(),e.TgZ(34,"th"),e._UZ(35,"p-columnFilter",44),e.qZA(),e.TgZ(36,"th"),e._UZ(37,"p-columnFilter",45),e.qZA(),e.TgZ(38,"th"),e._UZ(39,"p-columnFilter",46),e.qZA(),e.TgZ(40,"th"),e._UZ(41,"p-columnFilter",47),e.qZA(),e.TgZ(42,"th"),e._UZ(43,"p-columnFilter",48),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"codigo")," "),e.xp6(4),e.hij(" ",e.lcZ(7,9,"Nombre")," "),e.xp6(4),e.hij(" ",e.lcZ(11,11,"Fecha Inicio")," "),e.xp6(4),e.hij(" ",e.lcZ(15,13,"Hora Inicio")," "),e.xp6(4),e.hij(" ",e.lcZ(19,15,"Hora Fin")," "),e.xp6(4),e.hij(" ",e.lcZ(23,17,"Categoria")," "),e.xp6(4),e.hij(" ",e.lcZ(27,19,"Ajustes")," "))}function K(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td")(15,"p-button",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.editar(n))}),e.qZA(),e.TgZ(16,"p-button",50),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.eliminar(n.id))}),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(e.lcZ(7,6,t.fecha)),e.xp6(3),e.Oqu(t.horario_ini),e.xp6(2),e.Oqu(t.horario_fin),e.xp6(2),e.Oqu(t.Categorium.descripcion)}}const V=function(){return{width:"50vw"}},X=function(){return["id","nombre","fecha","horario_ini","horario_fin","categoria","ajustes"]},W=function(){return{"min-width":"100rem"}};let ee=(()=>{class r{constructor(t,o,a,n,c,_,T){this.authService=t,this.messageService=o,this.route=a,this.router=n,this.actividadEventoService=c,this.categoriaService=_,this.expositoresService=T,this.datosDelPadre=null,this.datosDelPadreActualizados=new Q.x,this.lista_actividades=[],this.lista_de_categorias=[],this.lista_de_expositores=[],this.select_id=0,this.actividadForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),horario_ini:new i.NI("",[i.kI.required]),horario_fin:new i.NI("",[i.kI.required]),categoria:new i.NI("",[i.kI.required]),EventoId:new i.NI("",[i.kI.required]),ExpositorId:new i.NI("",[i.kI.required])}),this.visible=!1}volver(){this.route.navigate(["/admin/eventos/mostrar"])}ngOnInit(){this.router.paramMap.subscribe(t=>{this.datosDelPadre=t.get("datosParaEnviar"),this.datosDelPadreActualizados.next(this.datosDelPadre),this.mostrarActividades(),this.mostrarCategorias(),this.showExpositores(),this.actividadForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),horario_ini:new i.NI("",[i.kI.required]),horario_fin:new i.NI("",[i.kI.required]),CategoriaId:new i.NI("",[i.kI.required]),EventoId:new i.NI(this.datosDelPadre,[i.kI.required]),ExpositorId:new i.NI("",[i.kI.required])})})}showExpositores(){this.expositoresService.mostrar().subscribe(t=>{this.lista_de_expositores=t,console.log(this.lista_de_expositores)},t=>{})}tienePermisos(t){let o=t;const a=this.authService.getRol();return o.some(n=>a.includes(n))}mostrarActividades(){this.actividadEventoService.mostrarId(this.datosDelPadre).subscribe(t=>{this.lista_actividades=t,console.log("traenco act",this.lista_actividades)},t=>console.error(t))}mostrarCategorias(){this.categoriaService.mostrar().subscribe(t=>{this.lista_de_categorias=t},t=>console.error(t))}eliminar(t){console.log(t),this.actividadEventoService.eliminar(t).subscribe(o=>{this.mostrarActividades(),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Actividad Eliminado"}),this.select_id=0},o=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al Eliminar"})})}showDialog(){this.visible=!0}hideDialog(){this.visible=!1,this.actividadForm.reset(),this.select_id=0,this.actividadForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),horario_ini:new i.NI("",[i.kI.required]),horario_fin:new i.NI("",[i.kI.required]),CategoriaId:new i.NI("",[i.kI.required]),EventoId:new i.NI(this.datosDelPadre,[i.kI.required]),ExpositorId:new i.NI("",[i.kI.required])})}cancelar(){this.hideDialog(),this.actividadForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),horario_ini:new i.NI("",[i.kI.required]),horario_fin:new i.NI("",[i.kI.required]),CategoriaId:new i.NI("",[i.kI.required]),EventoId:new i.NI(this.datosDelPadre,[i.kI.required]),ExpositorId:new i.NI("",[i.kI.required])})}editar(t){this.select_id=t.id,this.actividadForm.patchValue(t),this.showDialog()}adicionarActividad(t){this.select_id=t,console.log(this.select_id)}guardarEditar(){this.select_id>0?this.actividadEventoService.actualizar(this.select_id,this.actividadForm.value).subscribe(t=>{this.messageService.add({severity:"success",summary:"Actualizdo",detail:"Actividad Actualizado"}),this.hideDialog(),this.mostrarActividades()}):this.actividadEventoService.guardar(this.actividadForm.value).subscribe(t=>{this.messageService.add({severity:"success",summary:"A\xf1adido",detail:"Actividad A\xf1adido"}),this.hideDialog(),this.mostrarActividades()},t=>{this.messageService.add({severity:"error",summary:"Error",detail:"Evento no a\xf1adido"})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.e),e.Y36(m.ez),e.Y36(u.F0),e.Y36(u.gz),e.Y36(U.$),e.Y36(y.g),e.Y36(R.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-actividades"]],decls:50,vars:25,consts:[["styleClass","p-fluid",3,"header","visible","modal","draggable","resizable","visibleChange"],[1,"card"],[1,"row"],[3,"formGroup"],["for","name"],[1,"field"],["type","text","pInputText","","formControlName","nombre","required","","autofocus",""],["type","date","pInputText","","formControlName","fecha","required","","autofocus",""],["type","time","pInputText","","formControlName","horario_ini","required","","autofocus",""],["type","time","pInputText","","formControlName","horario_fin","required","","autofocus",""],[1,"mb-3"],[1,"formgrid","grid"],["class","field-radiobutton col-6",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger","my-1",3,"click"],[1,"flex","justify-content-between"],[1,"flex","my-3"],[1,"flex","mx-3"],["label","Adicionar Actvidad",3,"click"],["label","Volver",3,"click"],["selectionMode","single","scrollHeight","400px","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"selection","value","paginator","rows","scrollable","showCurrentPageReport","globalFilterFields","tableStyle","selectionChange"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["position","top-right"],[1,"field-radiobutton","col-6"],["formControlName","CategoriaId",3,"value"],["formControlName","ExpositorId",3,"value"],["pSortableColumn","id"],["field","id"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","fecha"],["field","fecha"],["pSortableColumn","horario_ini"],["field","horario_ini"],["pSortableColumn","horario_fin"],["field","horario_fin"],["pSortableColumn","Categorium.descripcion"],["field","Categorium.descripcion"],["pSortableColumn","ajustes"],["field","ajustes"],["type","text","field","id"],["type","text","field","nombre"],["type","text","field","fecha"],["type","text","field","horario_ini"],["type","text","field","horario_fin"],["type","text","field","Categorium.descripcion"],["type","text","field","ajustes"],["icon","pi pi-pencil","styleClass","p-button-raised p-button-warning",1,"border",3,"click"],["icon","pi pi-trash","styleClass","p-button-raised p-button-danger",1,"border",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(n){return o.visible=n}),e._uU(1),e.ALo(2,"json"),e.TgZ(3,"div",1)(4,"div",2)(5,"form",3)(6,"label",4),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"label",4),e._uU(11,"fecha"),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"input",7),e.qZA(),e.TgZ(14,"label",4),e._uU(15,"Hora Inicio"),e.qZA(),e.TgZ(16,"div",5),e._UZ(17,"input",8),e.qZA(),e.TgZ(18,"label",4),e._uU(19,"Hora Fin"),e.qZA(),e.TgZ(20,"div",5),e._UZ(21,"input",9),e.qZA(),e.TgZ(22,"div",5)(23,"label",10),e._uU(24,"Categoria"),e.qZA(),e.TgZ(25,"div",11),e.YNc(26,$,4,2,"div",12),e.qZA()(),e.TgZ(27,"div",5)(28,"label",10),e._uU(29,"Expositores Disponibles"),e.qZA(),e.TgZ(30,"div",11),e.YNc(31,G,4,2,"div",12),e.qZA()(),e.TgZ(32,"div",2)(33,"button",13),e.NdJ("click",function(){return o.guardarEditar()}),e._uU(34),e.qZA(),e.TgZ(35,"button",14),e.NdJ("click",function(){return o.cancelar()}),e._uU(36," Cancelar "),e.qZA()()()()()(),e.TgZ(37,"div",15)(38,"h3"),e._uU(39,"Actividades del Evento"),e.qZA(),e.TgZ(40,"div",16)(41,"div",17)(42,"p-button",18),e.NdJ("click",function(){return o.showDialog()}),e.qZA()(),e.TgZ(43,"p-button",19),e.NdJ("click",function(){return o.volver()}),e.qZA()()(),e.TgZ(44,"div",1)(45,"p-table",20,21),e.NdJ("selectionChange",function(n){return o.lista_actividades=n}),e.YNc(47,B,44,21,"ng-template",22),e.YNc(48,K,17,8,"ng-template",23),e.qZA()(),e._UZ(49,"p-toast",24)),2&t&&(e.Akn(e.DdM(22,V)),e.s9C("header",o.select_id>0?"Actualizar Actividad":"Crear Actividad"),e.Q6J("visible",o.visible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.hij(" ",e.lcZ(2,20,o.actividadForm.value)," "),e.xp6(4),e.Q6J("formGroup",o.actividadForm),e.xp6(21),e.Q6J("ngForOf",o.lista_de_categorias),e.xp6(5),e.Q6J("ngForOf",o.lista_de_expositores),e.xp6(3),e.hij(" ",o.select_id>0?"Guardar Cambios":"Guardar"," "),e.xp6(11),e.Q6J("selection",o.lista_actividades)("value",o.lista_actividades)("paginator",!0)("rows",15)("scrollable",!0)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(23,X))("tableStyle",e.DdM(24,W)))},dependencies:[d.sg,p.iA,m.jx,p.lQ,p.fz,p.xl,g.zx,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,h.V,v.FN,A.o,w.EU,d.gd,d.Ts,d.uU]}),r})();var N=l(498),F=l(650),E=l(4844),te=l(1481),ie=l(5471),oe=l(1326),re=l(5277),ae=l(9433);function ne(r,s){1&r&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.ALo(3,"uppercase"),e._UZ(4,"p-sortIcon",15),e.qZA(),e.TgZ(5,"th",16),e._uU(6),e.ALo(7,"uppercase"),e._UZ(8,"p-sortIcon",17),e.qZA(),e.TgZ(9,"th",18),e._uU(10),e.ALo(11,"uppercase"),e._UZ(12,"p-sortIcon",19),e.qZA(),e.TgZ(13,"th",20),e._uU(14),e.ALo(15,"uppercase"),e._UZ(16,"p-sortIcon",21),e.qZA(),e.TgZ(17,"th",22),e._uU(18),e.ALo(19,"uppercase"),e._UZ(20,"p-sortIcon",23),e.qZA(),e.TgZ(21,"th",24),e._uU(22),e.ALo(23,"uppercase"),e._UZ(24,"p-sortIcon",25),e.qZA()(),e.TgZ(25,"tr")(26,"th"),e._UZ(27,"p-columnFilter",26),e.qZA(),e.TgZ(28,"th"),e._UZ(29,"p-columnFilter",27),e.qZA(),e.TgZ(30,"th"),e._UZ(31,"p-columnFilter",28),e.qZA(),e.TgZ(32,"th"),e._UZ(33,"p-columnFilter",29),e.qZA(),e.TgZ(34,"th"),e._UZ(35,"p-columnFilter",30),e.qZA(),e.TgZ(36,"th"),e._UZ(37,"p-columnFilter",31),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"codigo")," "),e.xp6(4),e.hij(" ",e.lcZ(7,8,"Nombre")," "),e.xp6(4),e.hij(" ",e.lcZ(11,10,"Fecha Inicio")," "),e.xp6(4),e.hij(" ",e.lcZ(15,12,"Hora Inicio")," "),e.xp6(4),e.hij(" ",e.lcZ(19,14,"Hora Fin")," "),e.xp6(4),e.hij(" ",e.lcZ(23,16,"Ajustes")," "))}function se(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td")(13,"p-button",32),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.showModalDialogImage(n))}),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(e.lcZ(7,5,t.fecha)),e.xp6(3),e.Oqu(t.horario_ini),e.xp6(2),e.Oqu(t.horario_fin)}}function le(r,s){1&r&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.ALo(3,"uppercase"),e._UZ(4,"p-sortIcon",15),e.qZA(),e.TgZ(5,"th",33),e._uU(6),e.ALo(7,"uppercase"),e._UZ(8,"p-sortIcon",34),e.qZA(),e.TgZ(9,"th",35),e._uU(10),e.ALo(11,"uppercase"),e._UZ(12,"p-sortIcon",36),e.qZA(),e.TgZ(13,"th",24),e._uU(14),e.ALo(15,"uppercase"),e._UZ(16,"p-sortIcon",25),e.qZA()(),e.TgZ(17,"tr")(18,"th"),e._UZ(19,"p-columnFilter",26),e.qZA(),e.TgZ(20,"th"),e._UZ(21,"p-columnFilter",37),e.qZA(),e.TgZ(22,"th"),e._UZ(23,"p-columnFilter",38),e.qZA(),e.TgZ(24,"th"),e._UZ(25,"p-columnFilter",31),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"codigo")," "),e.xp6(4),e.hij(" ",e.lcZ(7,6,"nombre archivo")," "),e.xp6(4),e.hij(" ",e.lcZ(11,8,"Direccion")," "),e.xp6(4),e.hij(" ",e.lcZ(15,10,"Ajustes")," "))}function ce(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",39),e._uU(7," Enlace"),e.qZA()(),e.TgZ(8,"td")(9,"p-button",40),e.NdJ("click",function(){const n=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.eliminar(n.id))}),e.qZA()()()}if(2&r){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.nombre_archivo),e.xp6(2),e.Q6J("href",o.direccionImagen+t.nombre_archivo,e.LSH)}}function de(r,s){if(1&r&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.xp6(1),e.AsE(" ",t.name," - ",t.size," bytes ")}}function pe(r,s){if(1&r&&(e.TgZ(0,"ul"),e.YNc(1,de,2,2,"li",42),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.uploadedFiles)}}function ue(r,s){if(1&r&&e.YNc(0,pe,2,1,"ul",41),2&r){const t=e.oxw();e.Q6J("ngIf",t.uploadedFiles.length)}}function me(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"p-button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayModalImage=!1)}),e.qZA()}}const _e=function(){return["id","nombre","fecha","horario_ini","horario_fin","categoria","ajustes"]},ge=function(){return{"min-width":"100rem"}},he=function(){return{width:"50vw"}},ve=function(){return{"min-width":"50rem"}},fe=[{path:"mostrar",canActivate:[N.C,F.B],data:{roles:E.f.permisosHijos.eventos.agregarEventos},component:P},{path:"actividades/:datosParaEnviar",component:ee},{canActivate:[N.C,F.B],data:{roles:E.f.permisosHijos.eventos.material},path:"material",component:(()=>{class r{constructor(t,o,a,n,c,_,T,Ue,ye,we){this.sanitizer=t,this.usuarioService=o,this.personaService=a,this.authService=n,this.route=c,this.messageService=_,this.actividadEventoHasExpostorService=T,this.actividadEventoService=Ue,this.categoriaService=ye,this.materialActividadServices=we,this.lista_de_actividades=[],this.lista_personas=[],this.select_id=0,this.visible=!1,this.displayModalImage=!1,this.uploadedFiles=[],this.direccionImagen="",this.lista_de_categorias=[],this.current_user=0,this.actividadForm=new i.cw({nombre:new i.NI("",[i.kI.required]),fecha:new i.NI("",[i.kI.required]),horario_ini:new i.NI("",[i.kI.required]),horario_fin:new i.NI("",[i.kI.required]),categoria:new i.NI("",[i.kI.required]),EventoId:new i.NI("",[i.kI.required])}),this.direccionImagen=f.y.usuarios}ngOnInit(){this.getIdUser(),this.mostrarCategorias(),this.direccionImagen=f.y.material_expositor}volver(){this.route.navigate(["/admin/eventos/material"])}getIdUser(){let t=this.authService.getUser();this.usuarioService.mostrar().subscribe(o=>{for(let a=0;a<o.length;a++)o[a].nom_usuario===t&&(this.current_user=o[a].id,this.getIdActividadEvento())},o=>{})}getIdActividadEvento(){this.actividadEventoHasExpostorService.mostrarId(this.current_user).subscribe(t=>{this.getActividadesByUser(t)},t=>{})}getActividadesByUser(t){let o=[];for(let a=0;a<t.length;a++)o.push(t[a].Actividad_EventoId);this.actividadEventoService.mostrar().subscribe(a=>{for(let n=0;n<a.length;n++)o.find(_=>_===a[n].id)&&this.lista_de_actividades.push(a[n])},a=>{})}mostrarActividades(){}mostrarCategorias(){this.categoriaService.mostrar().subscribe(t=>{this.lista_de_categorias=t,console.log(this.lista_de_categorias)},t=>console.error(t))}eliminar(t){this.materialActividadServices.eliminar(t).subscribe(o=>{this.showFileByExpositor()},o=>{})}showModalDialogImage(t){this.eventos={...t},this.displayModalImage=!0,this.showFileByExpositor()}showFileByExpositor(){this.materialActividadServices.mostrarIdByExpositor(this.current_user,{Actividad_EventoId:this.eventos.id}).subscribe(t=>{this.lista_de_archivos=t,console.log(this.lista_de_archivos)},t=>{})}myUploader(t){let o=new FormData;o.append("imagen",t.files[0]),o.append("Actividad_EventoId",this.eventos.id),this.materialActividadServices.actualizarImagen(this.current_user,o).subscribe(a=>{this.messageService.add({severity:"info",summary:"Imagen Actualizada",detail:""}),this.displayModalImage=!1,this.showFileByExpositor()},a=>{this.messageService.add({severity:"info",summary:"Error al Actualizar Imagen",detail:""})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(te.H7),e.Y36(ie.J),e.Y36(oe.J),e.Y36(b.e),e.Y36(u.F0),e.Y36(m.ez),e.Y36(re.V),e.Y36(U.$),e.Y36(y.g),e.Y36(ae.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-material"]],decls:20,vars:27,consts:[[1,"flex","justify-content-between"],[1,"flex","my-3"],[1,"flex","mx-3"],[1,"card"],["selectionMode","single","scrollHeight","400px","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"selection","value","paginator","rows","scrollable","showCurrentPageReport","globalFilterFields","tableStyle","selectionChange"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["position","top-right"],["header","Subir Imagen",3,"visible","modal","draggable","resizable","maximizable","visibleChange"],["selectionMode","single","scrollHeight","400px","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"selection","value","paginator","rows","scrollable","showCurrentPageReport","tableStyle","selectionChange"],["name","demo[]",3,"customUpload","uploadHandler"],["pTemplate","content"],["pTemplate","footer"],["pSortableColumn","id"],["field","id"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","fecha"],["field","fecha"],["pSortableColumn","horario_ini"],["field","horario_ini"],["pSortableColumn","horario_fin"],["field","horario_fin"],["pSortableColumn","ajustes"],["field","ajustes"],["type","text","field","id"],["type","text","field","nombre"],["type","text","field","fecha"],["type","text","field","horario_ini"],["type","text","field","horario_fin"],["type","text","field","ajustes"],["icon","pi pi-plus","styleClass","p-button-raised p-button-success",1,"border",3,"click"],["pSortableColumn","nombre_archivo"],["field","nombre_archivo"],["pSortableColumn","Archivo"],["field","Archivo"],["type","text","field","nombre_archivo"],["type","text","field","archivo"],["target","_blank",1,"p-button","p-button-raised","p-button-rounded",3,"href"],["icon","pi pi-trash","styleClass","p-button-raised p-button-danger",1,"border",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Actividades del Evento"),e.qZA(),e.TgZ(3,"div",1),e._UZ(4,"div",2),e.qZA()(),e.TgZ(5,"div",3)(6,"p-table",4,5),e.NdJ("selectionChange",function(n){return o.lista_de_actividades=n}),e.YNc(8,ne,38,18,"ng-template",6),e.YNc(9,se,14,7,"ng-template",7),e.qZA()(),e._UZ(10,"p-toast",8),e.TgZ(11,"p-dialog",9),e.NdJ("visibleChange",function(n){return o.displayModalImage=n}),e.TgZ(12,"div",3)(13,"p-table",10,5),e.NdJ("selectionChange",function(n){return o.lista_de_archivos=n}),e.YNc(15,le,26,12,"ng-template",6),e.YNc(16,ce,10,3,"ng-template",7),e.qZA()(),e.TgZ(17,"p-fileUpload",11),e.NdJ("uploadHandler",function(n){return o.myUploader(n)}),e.YNc(18,ue,1,1,"ng-template",12),e.qZA(),e.YNc(19,me,1,0,"ng-template",13),e.qZA()),2&t&&(e.xp6(6),e.Q6J("selection",o.lista_de_actividades)("value",o.lista_de_actividades)("paginator",!0)("rows",15)("scrollable",!0)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(23,_e))("tableStyle",e.DdM(24,ge)),e.xp6(5),e.Akn(e.DdM(25,he)),e.Q6J("visible",o.displayModalImage)("modal",!0)("draggable",!1)("resizable",!1)("maximizable",!0),e.xp6(2),e.Q6J("selection",o.lista_de_archivos)("value",o.lista_de_archivos)("paginator",!0)("rows",15)("scrollable",!0)("showCurrentPageReport",!0)("tableStyle",e.DdM(26,ve)),e.xp6(4),e.Q6J("customUpload",!0))},dependencies:[d.sg,d.O5,p.iA,m.jx,p.lQ,p.fz,p.xl,g.zx,h.V,v.FN,I.p,d.gd,d.uU]}),r})()}];let be=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[u.Bz.forChild(fe),u.Bz]}),r})();var Ae=l(6264),Ie=l(4156),Te=l(8433),Ce=l(1118),xe=l(8691);let qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,be,Ae.I,p.U$,g.hJ,i.UX,h.S,v.EV,i.u5,Ie.WebModule,A.j,Te.ON,Ce.XH,xe.kW,x.A,w.cc,I.O]}),r})()}}]);